---
layout: default
---







{% capture variable_binding %}

## Variables

Output is escaped by default, no need to worry about XSS.

{% raw %}

```html
{\{variable}}
```

```js
variable: 42,
```

-----

{{variable}}

-----

{% endraw %}
{% endcapture %}








{% capture attr_variable_binding %}

### Attribute-variable binding

{% raw %}

```html
<input value="{\{variable}}">
```

```js
variable: 42,
```

-----

<input value="{{variable}}" {{! multiline
  mustache
  comment, just for the test }}/>

-----

{% endraw %}
{% endcapture %}








{% capture unescaped_html %}

#### Output unescaped HTML

You're responsible for sanitizing the contents, NEVER trust user input
(like in this demo :). Try `<i>jtmpl rocks</i>` in the input above.

{% raw %}

```html
{\{\{variable}}}
```

-----

{{{variable}}}

-----

{% endraw %}
{% endcapture %}








{% capture non_existent_var %}

#### Non-existent variable

Non-existent variables are empty and don't cause an error.
Try `jtmpl('#target')('nonExistentVariable', 'now I exist')` on the console.

{% raw %}

```html
nothing to see here, move along {\{nonExistentVariable}}
```

```js
// "If a tree falls in a forest and no one is around to hear it, does it make a sound?"
```
-----

nothing to see here, move along {{nonExistentVariable}}

-----

{% endraw %}
{% endcapture %}








{% capture collection %}

## Collections, events

{% raw %}

```html
<button class='push'>push</button> <button class='pop'>pop</button>
<ul>
{\{#numbers}}
  <li>{\{.}}</li>
{\{/numbers}}
{\{^numbers}}
  <li>&lt;no numbers&gt;</li>
{\{/numbers}}
</ul>
```

```js
// Events plugin
__on__: {
  'click': {
    '.push': function(ev) {
      this('numbers').push(~~(Math.random()*100));
    },
    '.pop': function(ev) {
      if (this('numbers').len) this('numbers').pop();
    }
  }
},
// Numbers field
numbers: [1, 2, 3],
```

-----

<button class='push'>push</button> <button class='pop'>pop</button>
<ul>
{{#numbers}}
  <li>{{.}}</li>
{{/numbers}}
{{^numbers}}
  <li>&lt;no numbers&gt;</li>
{{/numbers}}
</ul>

-----

{% endraw %}
{% endcapture %}








{% capture computed_property %}

## Computed properties

{% raw %}

```html
<code>model('sumNumbers')</code> = {\{sumNumbers}}
```

```js
sumNumbers: function() {
  return this('numbers').values.reduce(
    function(prev, curr) {
      return prev + curr;
    },
    0);
},
```

-----

`model('sumNumbers')` = {{sumNumbers}}

-----

{% endraw %}
{% endcapture %}








{% capture computed_collection %}

### Computed collection

{% raw %}

```html
<h6>As List</h6>
<ul>
{\{#evenNumbers}}
  <li>{\{.}}</li>
{\{/}}
{\{^evenNumbers}}
  <li>&lt;no even numbers&gt;</li>
{\{/}}
</ul>


<h6>As Variable</h6>
<div>{\{evenNumbers}}</div>
```

```js
evenNumbers: function() {
  return this('numbers').values.filter(function(el) {
    return el % 2 === 0;
  });
},
```

-----

<h6>As List</h6>
<ul>
{{#evenNumbers}}
  <li>{{.}}</li>
{{/}}
{{^evenNumbers}}
  <li>&lt;no even numbers&gt;</li>
{{/}}
</ul>


<h6>As Variable</h6>
<div>{{evenNumbers}}</div>

-----

{% endraw %}
{% endcapture %}








{% capture table %}

### Table

Tables are supported, in this case a simple 2-dimensional array is rendered.

{% raw %}

```html
<table>
  <tbody>
    {\{#table}}
    <tr>
      {\{#.}}<td>{\{.}}</td>{\{/}}
    </tr>
    {\{/table}}
  </tbody>
</table>
```

```js
table: [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
],
```

-----

<table>
  <tbody>
    {{#table}}
    <tr>
      {{#.}}<td>{{.}}</td>{{/}}
    </tr>
    {{/table}}
  </tbody>
</table>

-----

{% endraw %}
{% endcapture %}








{% capture single_choice %}

## Single-choice patterns


{% raw %}

```html
<p>
  <select>
    {\{#options}}
    <option selected={\{checked}}>{\{text}}</option>
    {\{/options}}
  </select>
</p>
<p>
  {\{#options}}
  <label><input type="radio" name="radio-group" checked={\{checked}}>{\{text}}</label>
  {\{/options}}
</p>
```

```js
options: [
  { checked: true, text: 'one' },
  { checked: false, text: 'two' },
  { checked: false, text: 'three' }
],
```

-----

<p>
  <select>
    {{#options}}
    <option selected={{checked}}>{{text}}</option>
    {{/options}}
  </select>
</p>
<p>
  {{#options}}
  <label><input type="radio" name="radio-group" checked={{checked}}>{{text}}</label>
  {{/options}}
</p>

-----

{% endraw %}
{% endcapture %}








{% capture multi_choice %}

## Multi-choice patterns


{% raw %}

```html
<p>
  <select multiple>
    {\{#options2}}
    <option selected={\{checked}}> {\{text}}</option>
    {\{/}}
  </select>
</p>

<p>
  {\{#options2}}
  <label><input type="checkbox" checked={\{checked}}> {\{text}}</label>
  {\{/}}
</p>
<p>
  <label><input type="checkbox" checked="{\{checkAll}}"> check/uncheck all</label>
</p>
```

```js
options2: [
  { checked: true, text: 'one' },
  { checked: false, text: 'two' },
  { checked: true, text: 'three' },
  { checked: false, text: 'four' }
],
checkAll: function(newVal) {
  if (typeof newVal === 'boolean') {
    // Setter
    // Iterate `options2`, set `checked` to newVal
    this('options2').values.map(function(el, i) {
      this('options2')(i)('checked', newVal);
    }, this);
  }
  else {
    // Getter
    // (arguments[0] would be a function or undefined)
    // Logical AND of all `options2.checked`
    return this('options2').values.reduce(function(prev, curr) {
      return prev && curr.checked;
    }, true);
  }
},
```

-----

<p>
  <select multiple>
    {{#options2}}
    <option selected={{checked}}> {{text}}</option>
    {{/}}
  </select>
</p>

<p>
  {{#options2}}
  <label><input type="checkbox" checked={{checked}}> {{text}}</label>
  {{/}}
</p>
<p>
  <label><input type="checkbox" checked="{{checkAll}}"> check/uncheck all</label>
</p>

-----

{% endraw %}
{% endcapture %}








{% capture conditions %}

## Conditions

{% raw %}

```html
<p>
  <label>
    <input type="checkbox" checked="{{condition}}">
    <code>model('condition')</code>
  </label>
</p>
<p class="{\{#condition}}red-class{\{/}} {\{^condition}}bordered-class{\{/}}">
  Lorem ipsum ...
</p>
<div>
  {\{#condition}}
  <p>The above paragraph has .red-class and NOT .bordered-class</p>
  {\{/condition}}
  {\{^condition}}
  <p>Inverted section. The above paragraph has .bordered-class</p>
  {\{/}}
</div>
```

```js
condition: true,
```

-----

<p>
  <label>
    <input type="checkbox" checked="{{condition}}">
    <code>model('condition')</code>
  </label>
</p>
<p class="{{#condition}}red-class{{/}} {{^condition}}bordered-class{{/}}">
  Lorem ipsum ...
</p>
<div>
  {{#condition}}
  <p>The above paragraph has .red-class and NOT .bordered-class</p>
  {{/condition}}
  {{^condition}}
  <p>Inverted section. The above paragraph has .bordered-class</p>
  {{/}}
</div>

-----

{% endraw %}
{% endcapture %}








{% capture tree_partial %}

## Partials

### Recursive partial

{% raw %}

```html
<div>{\{>"#tree-template"}}</div>
```

```
<!-- Partial template in current file -->
<script id="tree-template" type="text/jtmpl">
  <ul>
    {\{#tree}}
    <li>
      {\{value}}
      <div>{\{>"#tree-template"}}</div>
    </li>
    {\{/tree}}
  </ul>
</script>
```

```js
tree: [
  {
    value: 1,
    tree: [
      {
        value: 2,
        tree: [
          {
            value: 3
          },
          {
            value: 4
          }
        ]
      },
      {
        value: 5
      }
    ]
  },
  {
    value: 6
  }
],
```

-----

<div>{{>"#tree-template"}}</div>

-----

{% endraw %}
{% endcapture %}








{% capture external_partial %}

#### External partial

{% raw %}

```html
<div>
{\{#externalPartial}}
  {\{>"partials.html#a-partial"}}
{\{/}}
</div>
```

```
<!-- Partial template in partials.html -->
<script id="a-partial"
  type="text/jtmpl"
  data-model="#a-partial-model">
  <p>
    I am a partial in its own file, having own model and I am loaded
    into the <code>externalPartial</code> context of my parent.
  </p>
  <p>
    My properties are: own = "{{own}}", extended = "{{extended}}"
  </p>
</script>
```

```html
<!-- Partial template refers to a model in the same file -->
<script id="a-partial-model"
  type="text/model">
  {
    __init__: function() {
      this('own', 'own property, inherited by parent, initialized by __init__');
    }
  }
</script>
```

```js
externalPartial: {
  extended: 'extended property',
},
```

-----

<div>
{{#externalPartial}}
  {{>"partials.html#a-partial"}}
{{/}}
</div>

-----

{% endraw %}
{% endcapture %}








{% capture dynamic_partial %}

#### Dynamic partial

{% raw %}

```html
<div>
  {\{>dynamicPartial}}
</div>
```

```
<!-- Partial template in partials.html -->
<script id="partial2" type="text/jtmpl">
  <p>partials.html#partial2, loaded via <code>dynamicPartial</code></p>
</script>
```

```js
dynamicPartial: 'partials.html#partial2'
```

-----

<div>
  {{>dynamicPartial}}
</div>

-----

{% endraw %}
{% endcapture %}





















{% capture kitchensync %}
{% raw %}

<style>
  .red-class {
    color:red;
    -webkit-transition:color 0.5s ease-in;
    -moz-transition:color 0.5s ease-in;
    -o-transition:color 0.5s ease-in;
    transition:color 0.5s ease-in;
  }

  .bordered-class {
    border: 1px dotted #999;
  }
</style>

<h2>KitchenSync</h2>

<p>
  Demo of most jtmpl features (WIP). Tags closely mimic Mustache behavior,
  but the result is <i>live</i> and always in sync with the model.
</p>

<div id="target" data-jtmpl="#app"></div>

<div id="target2" data-jtmpl="#target2" data-model="external-model.js">
  <h3>Another target, self-contained template, external model</h3>
  {{#items}}{{.}}&nbsp;{{/}}
</div>


<br><br><br><br><br>
<p>
  Missing the kitchen sink?
  <a href="http://www-archive.mozilla.org/docs/web-developer/samples/kitchensink.xml">
    Here it is.
  </a>
</p>





<script id="app" data-model="#model" type="text/jtmpl">
  <h2>The model</h2>

  <p>
    The data model of any target tag can be referenced:
    <code>var model = jtmpl('#target');</code>
  </p>

  <p>
    The data model is a <a href="https://github.com/atmin/freak">Freak instance</a>, an accessor function.
  </p>



  {% endraw %}{{ variable_binding|markdownify }}{% raw %}

  {% endraw %}{{ attr_variable_binding|markdownify }}{% raw %}

  {% endraw %}{{ unescaped_html|markdownify }}{% raw %}

  {% endraw %}{{ non_existent_var|markdownify }}{% raw %}

  {% endraw %}{{ collection|markdownify }}{% raw %}

  {% endraw %}{{ computed_property|markdownify }}{% raw %}

  {% endraw %}{{ computed_collection|markdownify }}{% raw %}

  {% endraw %}{{ table|markdownify }}{% raw %}

  {% endraw %}{{ single_choice|markdownify }}{% raw %}

  {% endraw %}{{ multi_choice|markdownify }}{% raw %}

  {% endraw %}{{ conditions|markdownify }}{% raw %}

  {% endraw %}{{ tree_partial|markdownify }}{% raw %}

  {% endraw %}{{ external_partial|markdownify }}{% raw %}

  {% endraw %}{{ dynamic_partial|markdownify }}{% raw %}















</script>


<script id="tree-template" type="text/jtmpl">
  <ul>
    {{#tree}}
    <li>
      {{value}}
      <div>{{>"#tree-template"}}</div>
    </li>
    {{/tree}}
  </ul>
</script>






<script id="model">
  if (typeof module !== 'undefined') module.exports = {

    //// Plugins

    // Initialization
    __init__: function() {
      this('initialized', true);
    },

    // Events
    __on__: {
      'click': {
        '.push': function(ev) {
          this('numbers').push(parseInt(Math.random() * 100));
        },
        '.pop': function(ev) {
          if (this('numbers').len) this('numbers').pop();
        }
      }
    },

    //// Fields
    variable: 42,
    condition: true,
    numbers: [1, 2, 3],
    sumNumbers: function() {
      return this('numbers').values.reduce(function(prev, curr) {
        return prev + curr;
      }, 0);
    },
    evenNumbers: function() {
      return this('numbers').values.filter(function(el) {
        return el % 2 === 0;
      });
    },
    table: [
      [1, 2, 3],
      [4, 5, 6],
      [7, 8, 9]
    ],
    options: [
      { checked: true, text: 'one' },
      { checked: false, text: 'two' },
      { checked: false, text: 'three' }
    ],
    options2: [
      { checked: true, text: 'one' },
      { checked: false, text: 'two' },
      { checked: true, text: 'three' },
      { checked: false, text: 'four' }
    ],
    checkAll: function(newVal) {
      if (typeof newVal === 'boolean') {
        // Setter
        // Iterate `options2`, set `checked` to newVal
        this('options2').values.map(function(el, i) {
          this('options2')(i)('checked', newVal);
        }, this);
      }
      else {
        // Getter (arguments[0] would be a function)
        // Logical AND of all `options2.checked`
        return this('options2').values.reduce(function(prev, curr) {
          return prev && curr.checked;
        }, true);
      }
    },
    tree: [
      {
        value: 1,
        tree: [
          {
            value: 2,
            tree: [
              {
                value: 3
              },
              {
                value: 4
              }
            ]
          },
          {
            value: 5
          }
        ]
      },
      {
        value: 6
      }
    ],
    externalPartial: {
      extended: 'extended property',
    },
    dynamicPartial: 'partials.html#partial2'
  }
</script>

<script>
  window.onload = function() {
    // Fix code snippets
    [].map.call(document.querySelectorAll('.highlight'), function(el) {
      el.innerHTML = el.innerHTML.replace(/\\\{/g, '{');
    });
  };
</script>

{% endraw %}
{% endcapture %}


{{ kitchensync|markdownify }}
